<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>ËØæÁ®ãÁÆ°ÁêÜ</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/css/iconfont.css}">
    <link rel="stylesheet" th:href="@{/css/myblog.css}">
</head>
<body>
<!-- nav -->
<nav class="navbar navbar-expand-md shadow m-bg-black px-md-3 px-3 navbar-dark">
    <embed th:src="@{/img/logo.svg}" title="logo" width="65" height="65" class=" img-fluid mx-5 my-1 my-md-0 m-logo-size m-mobile-logo-size"></embed>
    <button class="navbar-toggler small" type="button" data-toggle="collapse" data-target="#Navbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="Navbar">
        <div class="navbar-nav">
            <a class="nav-link m-nav-btn px-md-3 mx-md-1 px-3 small nav-item m-scale" th:href="@{/admin}">È¶ñÈ°µ</a>
            <a class="nav-link m-nav-btn px-md-3 px-3 mx-md-1 small nav-item m-scale" th:href="@{/userManage}">Áî®Êà∑ÁÆ°ÁêÜ</a>
            <a class="nav-link m-nav-btn px-md-3 px-3 mx-md-1 small nav-item m-scale" th:href="@{/roleManage}">ËßíËâ≤ÁÆ°ÁêÜ</a>
            <a class="active  nav-link m-nav-btn px-md-3 px-3 mx-md-1 small nav-item m-scale" th:href="@{/courseManage}">ËØæÁ®ãÁÆ°ÁêÜ</a>
        </div>
    </div>
    <a class="nav-link m-nav-btn px-md-3 px-3 mx-md-1 small m-opcity-m" th:href="@{/logout}">ÈÄÄÂá∫ÁôªÂΩï</a>
</nav>
<!-- main -->
<div class="m-container-l m-mobile-lr-clear py-md-5 py-4">
    <!-- type -->
    <div class="container bg-white rounded border m-padding-lr-clear">
        <div class="m-auto py-md-2 border-bottom ">
            <div class="d-flex justify-content-between">
                <h4 class="m-text-lightseagreen font-weight-bold ml-3">ËØæÁ®ã</h4>
                <div id="count" class="m-font-s d-flex justify-content-center mr-3">ÂÖ±<span class="font-weight-bold m-text-orange" ></span>Áßç</div>
            </div>
        </div>
        <div class="py-3" th:each="coursename,couStat:${allCourseName}">
            <button class="btn  btn-sm m-2 m-border-lightseagreen" th:text="${coursename.getCname()}">
                <span class="badge m-badge-orange" th:text="${couStat.count}">[[${couStat.count}]]</span>
            </button>
        </div>
    </div>
    <!-- content -->
    <div class="container mt-5 bg-white rounded-top border border-bottom-0 m-border-t">
        <div>
            <div class="row pt-md-2">
                <div class="input-group mb-3 col-md-9 col-6">
                    <form class="d-flex w-100" th:action="@{/searchCourse}" method="post">
                        <input id="str" name="str" type="text" class="m-border-lightseagreen border form-control"  aria-label="Recipient's username" placeholder="üîçÊêúÁ¥¢ËØæÁ®ã(ËØæÁ®ãÂêç/ÊïôÂ∏àÂßìÂêç)" aria-describedby="basic-addon2">
                        <div class="input-group-append">
                            <button type="submit" class="m-bg-lightseagreen m-border-lightseagreen border btn input-group-text" id="basic-addon2">Search...</button>
                        </div>
                    </form>
                </div>
                <div class="col-md-3 col-6 text-center">
                    <a th:href="@{/allCourse}" class="px-md-3 py-md-2 btn m-bg-lightseagreen"><i class="iconfont iconicon-test8 font-weight-bold"></i> ÊâÄ Êúâ ËØæ Á®ã</a>
                </div>
            </div>
            <div>
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">ËØæÁ®ãÁºñÂè∑</th>
                        <th scope="col">ËØæÁ®ãÂêçÁß∞</th>
                        <th scope="col">ÊéàËØæÊïôÂ∏à</th>
                        <th scope="col">Áä∂ÊÄÅ</th>
                        <th scope="col">Êìç‰Ωú</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="allcourse,allCourseStat:${searchCourse}" class="align-middle">
                        <th th:text="${allCourseStat.index}+1" scope="row" ></th>
                        <td th:text="${allcourse.getId()}"></td>
                        <td th:text="${allcourse.getCname()}"></td>
                        <td th:text="${allcourse.getTname()}"></td>
                        <td th:switch="${allcourse.getState()}==1">
                            <span th:case="true" th:text="Â∑≤ÂºÄÂêØ"></span>
                            <span th:case="false" th:text="Â∑≤ÂÖ≥Èó≠"></span>
                        </td>
                        <td class="d-flex flex-wrap">
                            <!-- ‰øÆÊîπ -->
                            <div id="update" class="d-inline-block" th:switch="${allcourse.getState()}==1">
                                <button  type="button" th:case="true" class="btn-secondary btn mx-md-3 m-1 py-0" data-toggle="modal" data-target="#upCol">
                                    ÂÖ≥Èó≠
                                </button>
                                <button type="button" th:case="false" class="btn-success btn mx-md-3 m-1 py-0" data-toggle="modal" data-target="#upCol">
                                    ÂºÄÂêØ
                                </button>
                            </div>
<!--                            <button id="update" type="button" class="btn mx-md-3 m-1 py-0" data-toggle="modal" data-target="#upCol">-->
<!--                                ‰øÆÊîπÁä∂ÊÄÅ-->
<!--                            </button>-->
                            <div class="modal fade" id="upCol" tabindex="-1" role="dialog" aria-labelledby="upcou" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="upcou">Confirm</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <p>Á°ÆËÆ§‰øÆÊîπËØ•ËØæÁ®ãÁä∂ÊÄÅ?</p>
                                            <form id="changeForm" th:action="@{/updateCouState}" method="post">
                                                <input id="state" name="state" type="hidden">
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">ÂèñÊ∂à</button>
                                            <button id="changeSub" type="button" class=" btn btn-primary">Á°ÆËÆ§</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Âà†Èô§ -->
                            <button id="del" type="button" class="btn mx-md-3 m-1 py-0 btn-danger" data-toggle="modal" data-target="#delCol">
                                Âà†Èô§
                            </button>
                            <div class="modal fade" id="delCol" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <p>Á°ÆËÆ§Âà†Èô§ËØæÁ®ã</p>
                                            <form id="delForm" th:action="@{/deleteCourse}" method="post">
                                                <input id="delCode" name="delCode" type="hidden">
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">ÂèñÊ∂à</button>
                                            <button id="delSub" type="button" class=" btn btn-primary">Á°ÆËÆ§</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>
<!-- footer -->
<footer class="m-bg-black">
    <div class="container">
        <div class="row py-md-5 m-border-foot-b m-border-response-foot text-center">
            <div class="col-md-2 py-3 m-border-foot m-mobile-border-foot m-border-response-foot">
                <img th:src="@{/img/pic1.jpg}" style="width: 8em;height: 8em;">
            </div>
            <div class="col-md-3 py-3 m-mobile-border-foot m-border-foot m-border-response-foot">
                <h5 class="text-center text-white m-opcity-l m-mouth">SERVICES</h5>
                <div class="d-flex flex-column text-center">
                    <a href="#" class="text-white m-opcity-m p-md-2">Training</a>
                    <a href="#" class="text-white m-opcity-m p-md-2">Certification</a>
                    <a href="#" class="text-white m-opcity-m p-md-2">Support</a>
                </div>
            </div>
            <div class="col-md-3 py-3 m-mobile-border-foot m-border-foot m-border-response-foot">
                <h5 class="text-center text-white m-opcity-l m-mouth">ABOUT</h5>
                <div class="d-flex flex-column text-center">
                    <a href="#" class="text-white m-opcity-m p-md-2">Contact Us</a>
                    <a href="#" class="text-white m-opcity-m p-md-2">How To Buy</a>
                    <a href="#" class="text-white m-opcity-m p-md-2">Partners</a>
                </div>
            </div>
            <div class="col-md-4 py-3 m-mouth">
                <h5 class="text-center text-white m-opcity-l">ANNOUNCE</h5>
                <div class="ui inverted link list">
                    <p class="text-center text-white m-opcity-m p-md-2">ËØ•Âú®Á∫øÂ≠¶‰π†Á≥ªÁªü‰ªÖÁî®‰∫éÂ≠¶‰π†„ÄÇËØ•Âú®Á∫øÂ≠¶‰π†Á≥ªÁªü‰ªÖÁî®‰∫éÂ≠¶‰π†„ÄÇËØ•Âú®Á∫øÂ≠¶‰π†Á≥ªÁªü‰ªÖÁî®‰∫éÂ≠¶‰π†„ÄÇËØ•Âú®Á∫øÂ≠¶‰π†Á≥ªÁªü‰ªÖÁî®‰∫éÂ≠¶‰π†„ÄÇ</p>
                </div>
            </div>
        </div>
        <p class="text-center text-white m-opcity-m py-3 m-0 small m-mouth">ÁâàÊùÉÊâÄÊúâ,ÁøªÁâàÂøÖÁ©∂</p>
    </div>
</footer>
</body>
<script th:src="@{/js/jquery-3.4.0.js}" type="text/javascript" charset="utf-8"></script>
<script th:src="@{/js/bootstrap.min.js}" type="text/javascript" charset="utf-8"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    $(function () {
        var list = [[${searchCourse}]]
        var allCourseName = [[${allCourseName}]]
        $("#count").val(allCourseName.length)

        //‰øÆÊîπ
        $("tbody #update").click(function () {
            for (let i in list){
                if (i == $("tbody #update").index(this)){
                    $("#upId").val(list[i].id)
                    if(list[i].state == 1){
                        $("#state").val(0)
                    }else {
                        $("#state").val(1)
                    }
                    $("tbody #changeSub").click(function () {
                        $("#changeForm").submit();
                    })
                }
            }
        })
        //Âà†Èô§
        $("tbody #del").click(function () {
            for (let i in list){
                if (i == $("tbody #del").index(this)){
                    console.log(list[i].id)
                    $("#delCode").val(list[i].id)
                    $("tbody #delSub").click(function () {
                        $("#delForm").submit();
                    })
                }
            }
        })
    })
    /*]]>*/
</script>
</html>
